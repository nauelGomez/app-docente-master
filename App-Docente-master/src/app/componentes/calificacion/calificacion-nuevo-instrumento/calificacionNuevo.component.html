<div id="appCapsule">
  <app-titulo>
    <p titulo>Nuevo Instrumento</p>
    <p header>{{materiaSel?materiaSel.materia:''}}</p>
  </app-titulo>
  <!-- INICIO selector de MAERIA -->
  <app-spinner #appSpinner></app-spinner>
  <!--  -->
  <div class="section mt-2 mb-2" *ngIf="!(appSpinner.spinnerCargando | async)">
    <div class="form-group boxed">
        <div class="input-wrapper">
          <select class="form-control form-select" id="materia" name="materia" [(ngModel)]="materiaSel" (change)="buscarTiposCalificacionesyEscalas()">
            <option *ngFor="let materia of materias$ | async" [ngValue]="materia">{{materia.materia}} - ({{materia.curso}})</option>
        </select>
        </div>
    </div>
  </div>




  <!--  -->
  <div class="section inset mt-2" *ngIf="!(appSpinner.spinnerCargando | async)">
    <div class="section full mt-2 mb-2">
        <div class="section-title">Nuevo Instrumento de calificación</div>
        <div class="wide-block pb-1 pt-2">

            <form>

                <div class="form-group boxed">
                    <div class="input-wrapper">
                        <label class="form-label" for="tipoCalificaciones">Tipo de Instrumento</label>
                        <select class="form-control form-select" id="tipoCalificaciones" name="tipoCalificaciones" [(ngModel)]="calificacionSel">
                          <option [value]="null" disabled selected>Seleccionar Instrumento</option>
                          <option *ngFor="let calificacion of tiposCalificaciones$ | async" [ngValue]="calificacion">{{calificacion.tipo}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group boxed">
                    <div class="input-wrapper">
                        <label class="form-label" for="listaEscala">Tipo de calificación </label>
                        <select class="form-control form-select" id="escala" name="escala" [(ngModel)]="escalaSel">
                          <option [value]="null" disabled selected>Seleccionar Calificación</option>
                          <option *ngFor="let escala of listaEscalas$ | async" [ngValue]="escala">{{escala.escala}}</option>
                        </select>
                    </div>
                </div>


                <div class="form-group boxed">
                    <div class="input-wrapper">
                        <label class="form-label" for="password5">Titulo del instrumento</label>
                        <input type="texto" class="form-control" placeholder="Ingrese un titulo"
                            autocomplete="off" #titulo>
                    </div>
                </div>

                <div class="form-group boxed">
                        <div>Promediable</div>
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="SwitchCheckDefault2" name="promediable" [(ngModel)]="promediableValue">
                          <label class="form-check-label" for="SwitchCheckDefault2"></label>
                        </div>
                </div>
                <div class="section mt-2">
                  <div class="text-center dropdown">
                      <button class="btn btn-primary rounded shadowed  me-1 mb-1" type="button" (click)="enviarInstrumento(titulo.value)" [disabled]="!calificacionSel || !escalaSel || !titulo.value">
                          Agregar
                      </button>
                  </div>
              </div>
            </form>
        </div>
    </div>
  </div>



  </div>
